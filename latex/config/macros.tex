% ========================================================================================
% ========================================================================================
% ========================================================================================
% new commands 

% horizontal line
\newcommand{\horline}{\rule{1\linewidth}{0.9pt}}
\newcommand{\ie}{i.e.,\,}
\newcommand{\eg}{e.g.,\,}

% Math operators
\newcommand{\curl}{\nabla \times}
\renewcommand{\div}{\nabla \cdot}
\newcommand{\laplac}{\nabla^2}
\newcommand{\grad}{\nabla}

\newcommand{\LLR}{\text{LLR}}

% partial derivatives
\newcommand{\pder}[3][]{\frac{\partial^{#1}#2}{\partial#3^{#1}}}


% integral from -infinity to +infinity
\newcommand{\intinf}{\int_{-\infty}^{+\infty}}

% norm
\DeclarePairedDelimiterX{\norm}[1]{\lVert}{\rVert}{#1}

% aboslute value
\delimitershortfall-1sp
\newcommand\abs[1]{\left|#1\right|}


% ceil and floor
\DeclarePairedDelimiter\ceil{\lceil}{\rceil}
\DeclarePairedDelimiter\floor{\lfloor}{\rfloor}

% differentials for integrals
\newcommand*\dif{\mathop{}\!\mathrm{d}}

% matrix and vector
\newcommand{\vect}[1]{\mathbf{#1}}
\newcommand{\identity}{\vect{I}}

% trace
\DeclareMathOperator{\Tr}{Tr\,}

% covariance
\DeclarePairedDelimiter{\Prfences}{[}{]}
\newcommand{\Cov}{\operatorname{Cov}\Prfences}

% exected value
\newcommand{\E}[2][]{\mathbb{E}_{#1}\left[#2\right]}

% argmin
\DeclareMathOperator*{\argmin}{argmin\,}

% argmax
\DeclareMathOperator*{\argmax}{argmax\,}

% dagger
\renewcommand{\dag}{^\dagger}
\renewcommand{\b}[1]{\mathbf{#1}}

% text in math mode
\newcommand{\tx}[1]{\text{#1}}

% unit function
\newcommand{\one}{\operatorname{\mathbb{1}}\Prfences}

% probability of event
\renewcommand{\Pr}{\operatorname{Pr}\Prfences}
\newcommand{\given}{\,\middle|\,}

%=====================================================
% number sets
\newcommand{\R}{\mathbb{R}}
\newcommand{\C}{\mathbb{C}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\F}{\mathbb{F}}

% calligraphic, used mainly for operators and sets
\renewcommand{\AA}{\mathcal{A}}
\newcommand{\BB}{\mathcal{B}}
\newcommand{\CC}{\mathcal{C}}
\newcommand{\DD}{\mathcal{D}}
\newcommand{\EE}{\mathcal{E}}
\newcommand{\FF}{\mathcal{F}}
\newcommand{\GG}{\mathcal{G}}
\newcommand{\HH}{\mathcal{H}}
\newcommand{\II}{\mathcal{I}}
\newcommand{\JJ}{\mathcal{J}}
\newcommand{\KK}{\mathcal{K}}
\newcommand{\LL}{\mathcal{L}}
\newcommand{\MM}{\mathcal{M}}
\newcommand{\NN}{\mathcal{N}}
\newcommand{\OO}{\mathcal{O}}
\newcommand{\PP}{\mathcal{P}}
\newcommand{\QQ}{\mathcal{Q}}
\newcommand{\RR}{\mathcal{R}}
\renewcommand{\SS}{\mathcal{S}}
\newcommand{\TT}{\mathcal{T}}
\newcommand{\UU}{\mathcal{U}}
\newcommand{\VV}{\mathcal{V}}
\newcommand{\WW}{\mathcal{W}}
\newcommand{\XX}{\mathcal{X}}
\newcommand{\YY}{\mathcal{Y}}
\newcommand{\ZZ}{\mathcal{Z}}

%=====================================================

% Example of usage
%$$
%\E[\Gamma]{\int p_{\Gamma}(\gamma)\dif\gamma \given X} \qquad \intinf p(\gamma) \, d\gamma
%\qquad \norm*{\frac{1}{2}\E{X}}
%$$
%
%$$
%\ceil*{\intinf f \dif{x}}
%$$
%$$
%\ceil*{\intinf f dx} \qquad \Tr \vect{A}^\dagger\vect{A} = \identity_{n\times n} \qquad \Cov*{\intinf}
%$$
%
%$$
%\argmin \Cov{\bm{\psi}\boldsymbol{\psi}\dag\b{A}\dag\b{C}} \in \SS \qquad \one*{\lambda_\tx{cutoff}\frac{1}{2}} \otimes \Pr*{\intinf} \Pr*{A\given B}
%$$

%==================================================================

\makeatletter
\newcommand*{\da@rightarrow}{\mathchar"0\hexnumber@\symAMSa 4B }
\newcommand*{\da@leftarrow}{\mathchar"0\hexnumber@\symAMSa 4C }
\newcommand*{\xdashrightarrow}[2][]{%
	\mathrel{%
		\mathpalette{\da@xarrow{#1}{#2}{}\da@rightarrow{\,}{}}{}%
	}%
}
\newcommand{\xdashleftarrow}[2][]{%
	\mathrel{%
		\mathpalette{\da@xarrow{#1}{#2}\da@leftarrow{}{}{\,}}{}%
	}%
}
\newcommand*{\da@xarrow}[7]{%
	% #1: below
	% #2: above
	% #3: arrow left
	% #4: arrow right
	% #5: space left 
	% #6: space right
	% #7: math style 
	\sbox0{$\ifx#7\scriptstyle\scriptscriptstyle\else\scriptstyle\fi#5#1#6\m@th$}%
	\sbox2{$\ifx#7\scriptstyle\scriptscriptstyle\else\scriptstyle\fi#5#2#6\m@th$}%
	\sbox4{$#7\dabar@\m@th$}%
	\dimen@=\wd0 %
	\ifdim\wd2 >\dimen@
	\dimen@=\wd2 %   
	\fi
	\count@=2 %
	\def\da@bars{\dabar@\dabar@}%
	\@whiledim\count@\wd4<\dimen@\do{%
		\advance\count@\@ne
		\expandafter\def\expandafter\da@bars\expandafter{%
			\da@bars
			\dabar@ 
		}%
	}%  
	\mathrel{#3}%
	\mathrel{%   
		\mathop{\da@bars}\limits
		\ifx\\#1\\%
		\else
		_{\copy0}%
		\fi
		\ifx\\#2\\%
		\else
		^{\copy2}%
		\fi
	}%   
	\mathrel{#4}%
}
\makeatother